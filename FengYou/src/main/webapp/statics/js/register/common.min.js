var $CONFIG = {};
$CONFIG.pic_host = "http://img.myantu.net/";
$CONFIG.www_host = "http://www.myantu.com/";
$CONFIG.www_index = "";
$(document).ready(
		function() {
			if (runOn == "dev.myantu.com") {
				$CONFIG.pic_host = "/";
				$CONFIG.www_host = "http://dev.myantu.com/";
				$CONFIG.www_index = "index.html";
			} else {
				if (runOn == "www.myantu.com") {
					$CONFIG.pic_host = "http://img.myantu.net/";
					$CONFIG.www_host = "http://www.myantu.com/";
					$CONFIG.www_index = "";
				} else {
					$CONFIG.pic_host = "/";
					$CONFIG.www_host = "http://" + runOn + "/";
					$CONFIG.www_index = "";
				}
			}
			$(window).resize(function() {
				var s = parseInt($(window).width());
				if (s <= 1024) {
					$("#page_search").css({
						width : "952px",
						"margin-left" : "-502px"
					});
				} else {
					$("#page_search").css({
						width : "1202px",
						"margin-left" : "-627px"
					});
				}
				var $c = $(".city-head");
				var _cw = parseInt($c.width());
				$c.css("margin-left", "-" + _cw / 2 + "px");
			});
			$(".city-head").css(
					{
						"margin-left" : "-" + parseInt($(".city-head").width())
								/ 2 + "px",
						left : "50%"
					});
			$(".head-func-weixin").click(function() {
				$(".head-func-weixin-qr").fadeToggle(200);
			});
			$(".head-func-weixin-qr a").click(function() {
				$(".head-func-weixin-qr").fadeToggle(200);
			});
			$(".search-input-location").click(function() {
				$(".search-location-list").fadeIn(200);
			});
			$(document).mouseup(function(e) {
				if ($(e.target).parents(".search-location-list").length == 0) {
					$(".search-location-list").fadeOut(150);
				}
			});
			$(".search-location-tab li").click(
					function() {
						var i = $(this).index();
						$(this).addClass("cur").siblings().removeClass("cur");
						$(".search-locations>ul").eq(i).removeClass("hide")
								.siblings().addClass("hide");
					});
			$("#searchBtn").click(function(e) {
				var name = $(".search-input-location").val();
				var _exist = false;
				$.each($(".search-locations ul li a"), function(key, item) {
					var _name = $(item).text();
					if (_name.indexOf(name) == 0) {
						_exist = true;
						$("#city_id2").val($(item).attr("data-id2"));
						return false;
					}
				});
				if (!_exist) {
					$(".search-none-tip").show();
					e.preventDefault();
				} else {
					var houseNames = $("#key").val();
					var start = $.trim($("#from").val());
					var end = $.trim($("#to").val());
					var cityId = $("#city_id2").val();
					var path = "frontHouseAction/queryHouse?cityId="+cityId+"&houseNames="+houseNames+"";
					 window.location.href = path;
				}
			});
			$(".search-locations ul li a").click(function() {
				var $s = $(this);
				var _id = $s.attr("data-id");
				var _id2 = $s.attr("data-id2");
				var _map = $s.attr("data-map");
				var _name = $s.text();
				$(".search-input-location").val(_name);
				$("#city_id").val(_id);
				$("#city_id2").val(_id2);
				$("#city_map").val(_map);
				$("#customerSearchUrl").val("/KWkey/");
				$(".search-location-list").fadeOut(20);
			});
			$(".back-top").click(function() {
				$("body, html").animate({
					scrollTop : 0
				}, 500);
			});
			$("#from").datepicker(
					{
						defaultDate : new Date(),
						numberOfMonths : 2,
						yearRange : "2013:2050",
						minDate : new Date(),
						onClose : function(selectedDate) {
							var list = selectedDate.split("-");
							var selDay = new Date(list[0], (list[1] * 1 - 1),
									list[2]);
							var tomorrow = new Date(list[0], (list[1] * 1 - 1),
									list[2]);
							tomorrow.setDate(selDay.getDate() + 1);
							$("#to").datepicker(
									"option",
									"minDate",
									$.datepicker.formatDate("yy-mm-dd",
											tomorrow));
							if ($("#from").val()) {
								$("#to").val(
										$.datepicker.formatDate("yy-mm-dd",
												tomorrow));
								$("#to").datepicker("show");
							}
						}
					});
			$("#to").datepicker({
				defaultDate : new Date(),
				numberOfMonths : 2,
				yearRange : "2013:2050",
				minDate : new Date(),
				onClose : function(selectedDate) {
				}
			});
			$.datepicker.regional["zh-CN"] = {
				closeText : "关闭",
				prevText : "<上月",
				nextText : "下月>",
				currentText : "今天",
				monthNames : [ "一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月",
						"九月", "十月", "十一月", "十二月" ],
				monthNamesShort : [ "一", "二", "三", "四", "五", "六", "七", "八",
						"九", "十", "十一", "十二" ],
				dayNames : [ "星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六" ],
				dayNamesShort : [ "周日", "周一", "周二", "周三", "周四", "周五", "周六" ],
				dayNamesMin : [ "日", "一", "二", "三", "四", "五", "六" ],
				weekHeader : "周",
				dateFormat : "yy-mm-dd",
				firstDay : 1,
				isRTL : false,
				showMonthAfterYear : true,
				yearSuffix : "年"
			};
			$.datepicker.setDefaults($.datepicker.regional["zh-CN"]);
			$(".search-roomtype").find("a").click(function() {
				$(".search-roomtype").find("a").removeClass("selected");
				$(this).addClass("selected");
				$("#h_room_num").val($(this).attr("val"));
			});
			$(document).mouseup(function(e) {
				if ($(e.target).parents(".search-roomtype-list").length == 0) {
					$(".search-roomtype-list").fadeOut(100);
				}
			});
			$(".checkbox").click(function(e) {
				var box = $(this).children("input");
				if (box.is(":checked")) {
					$(this).removeClass("checked");
					box.prop("checked", false);
				} else {
					$(this).addClass("checked");
					box.prop("checked", true);
				}
			});
			$(".tooltip").hover(function() {
				var $s = $(this);
				var h = $s.height();
				var $t = $s.children(".tooltip-c");
				$t.css("top", (h + 5) + "px");
				$t.removeClass("hide");
			}, function() {
				var $s = $(this);
				var $t = $s.children(".tooltip-c");
				$t.removeAttr("style");
				$t.addClass("hide");
			});
		});
function scrollAction(h, ch) {
	if (parseInt($(window).scrollTop()) >= h) {
		$("#search").css({
			position : "fixed",
			height : "50px",
			"min-height" : "50px",
			"z-index" : "999"
		});
		$("#page_header").css({
			position : "fixed",
			top : "-210px"
		});
		$("#search_conditions").css("margin-top", "260px");
		$("#page_search").css({
			position : "fixed",
			height : "50px",
			"min-height" : "50px",
			"z-index" : "999",
			top : "0"
		});
		$(".head-search").css({
			width : "100%",
			height : "50px",
			position : "static",
			margin : 0
		});
		$(".head-search-wrapper").css({
			"box-shadow" : "0 0 6px rgba(0,0,0,0.1)",
			"border-bottom" : "1px solid #999"
		});
		$(".head-search-slogan").hide();
		$(".head-search-users").show();
	} else {
		$(
				"#search, #page_search, #page_header, .head-search, .head-search-wrapper")
				.removeAttr("style");
		$(".head-search-slogan").show();
		$(".head-search-users").hide();
		$("#search_conditions").css("margin-top", "0");
	}
	if (parseInt($(window).scrollTop()) >= ch) {
		$("#search_conditions").css({
			position : "fixed",
			top : "-106px",
			"z-index" : "2",
			"margin-top" : "0"
		});
		$("#search_result").css("margin-top", "156px");
		$(".conditions-more").fadeIn(300);
	} else {
		$("#search_result").removeAttr("style");
		$("#search_conditions").css({
			position : "relative",
			top : "auto",
			"z-index" : "2"
		});
		$(".conditions-more").fadeOut(100);
	}
}
function getURLParameter(name) {
	return decodeURI((RegExp(name + "=([^&;]+?)(&|#|;|$)")
			.exec(location.search) || [ , null ])[1]);
}
function tipShow(txt, callback) {
	if (!txt) {
		txt = "操作完成";
	}
	alert("进入tipShow。。");
	$("body").prepend(
			'<div class="gTip"><div class="gTipContent">' + txt
					+ "</div></div>");
	setTimeout(function() {
		$(".gTip").fadeOut(300, function() {
			$(".gTip").remove();
			(callback && typeof (callback) === "function") && callback();
		});
	}, 2000);
}
var buildStar = function(num) {
	if (num < 1) {
		return '<span class="score star-05"></span>';
	} else {
		if (num >= 1 && num < 1.5) {
			return '<span class="score star-1"></span>';
		} else {
			if (num >= 1.5 && num < 2) {
				return '<span class="score star-15"></span>';
			} else {
				if (num >= 2 && num < 2.5) {
					return '<span class="score star-2"></span>';
				} else {
					if (num >= 2.5 && num < 3) {
						return '<span class="score star-25"></span>';
					} else {
						if (num >= 3 && num < 3.5) {
							return '<span class="score star-3"></span>';
						} else {
							if (num >= 3.5 && num < 4) {
								return '<span class="score star-35"></span>';
							} else {
								if (num >= 4 && num < 4.5) {
									return '<span class="score star-4"></span>';
								} else {
									if (num >= 4.5 && num < 5) {
										return '<span class="score star-45"></span>';
									} else {
										return '<span class="score star-5"></span>';
									}
								}
							}
						}
					}
				}
			}
		}
	}
};
Date.prototype.Format = function(fmt) {
	var o = {
		"M+" : this.getMonth() + 1,
		"d+" : this.getDate(),
		"h+" : this.getHours(),
		"m+" : this.getMinutes(),
		"s+" : this.getSeconds(),
		"q+" : Math.floor((this.getMonth() + 3) / 3),
		S : this.getMilliseconds()
	};
	if (/(y+)/.test(fmt)) {
		fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "")
				.substr(4 - RegExp.$1.length));
	}
	for ( var k in o) {
		if (new RegExp("(" + k + ")").test(fmt)) {
			fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k])
					: (("00" + o[k]).substr(("" + o[k]).length)));
		}
	}
	return fmt;
};
function getCookie(c_name) {
	if (document.cookie.length > 0) {
		c_start = document.cookie.indexOf(c_name + "=");
		if (c_start != -1) {
			c_start = c_start + c_name.length + 1;
			c_end = document.cookie.indexOf(";", c_start);
			if (c_end == -1) {
				c_end = document.cookie.length;
			}
			return unescape(document.cookie.substring(c_start, c_end));
		}
	}
	return "";
}
function setCookie(c_name, value, expiredays) {
	var exdate = new Date();
	exdate.setDate(exdate.getDate() + expiredays);
	document.cookie = c_name
			+ "="
			+ escape(value)
			+ ((expiredays == null) ? ";path=/; domain=.myantu.com"
					: ";path=/; domain=.myantu.com; expires="
							+ exdate.toGMTString());
}
function checkCookie() {
	username = getCookie("username");
	if (username != null && username != "") {
		alert("Welcome again " + username + "!");
	} else {
		username = prompt("Please enter your name:", "");
		if (username != null && username != "") {
			setCookie("username", username, 365);
		}
	}
}
function clearString(s) {
	var pattern = new RegExp(
			"[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）&;|{}【】‘；：”“'。，、？]");
	var rs = "";
	for (var i = 0; i < s.length; i++) {
		rs = rs + s.substr(i, 1).replace(pattern, "");
	}
	return rs;
}
function uniencode(text) {
	text = escape(text.toString()).replace(/\+/g, "%2B");
	var matches = text.match(/(%([0-9A-F]{2}))/gi);
	if (matches) {
		for (var matchid = 0; matchid < matches.length; matchid++) {
			var code = matches[matchid].substring(1, 3);
			if (parseInt(code, 16) >= 128) {
				text = text.replace(matches[matchid], "00" + code);
			}
		}
	}
	text = text.replace("%25", "0025");
	text = text.replace("%u", "");
	return text;
}